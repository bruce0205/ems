<style>
  .title {
    font-weight: 300;
    display: inline-block;
    padding-bottom: 5px;
    position: relative;
  }

  .title:before {
    content: "";
    position: absolute;
    width: 100px;
    height: 1px;
    bottom: 0;
    left: -5%;
    border-bottom: 1px solid red;
  }

  .title:after {
    content: "";
    position: absolute;
    width: 250px;
    height: 1px;
    bottom: 0;
    left: 5%;
    border-bottom: 1px solid red;
  }
</style>

<script src="./vendors/jquery-knob/dist/jquery.knob.min.js"></script>
<script src="../build/js/vue.min.js"></script>

<div id="app">
  <div class="right_col" role="main">
    <div class="">
      <div class="page-title">
        <div class="title_left">
          <h3>機種管理看板
          </h3>
        </div>

        <div class="title_right">
          <div class="col-md-3 col-sm-3 col-xs-12 form-group pull-right top_search">
            <label for="" style="margin-right: 10px">2018/06/12 12:34:56</label>
          </div>
        </div>
      </div>

      <div class="clearfix"></div>

      <div class="row">
        <div class="col-md-6">
          <div class="x_panel">
            <div class="row">
              <div class="col-md-4">
                <h2>機台：S2</h2>
              </div>
              <div class="col-md-4">
                <h2>模號：M1</h2>
              </div>
              <div class="col-md-4">
                <h2>
                  <span class="label label-primary">生產中</span>
                </h2>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <h2>嫁動秒數：28</h2>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <h2 class="title">生產時間：2000</h2>
                <h2 class="title">損失時間：60</h2>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-sm-6 col-xs-12">
          <div class="x_panel">
            <canvas id="availableLineChart"></canvas>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="x_panel">
          <div class="row">
            <div class="col-md-12 text-center">
              <h1>Availability</h1>
              <input class="knob" data-width="150" data-height="150" data-angleOffset=90 data-linecap=round data-fgColor="#26B99A" :value="knob"
                readonly>
            </div>

          </div>
        </div>
      </div>
      <div class="col-md-6 col-sm-6 col-xs-12">
        <div class="x_panel">
          <canvas id="availableBarChart"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>


<script>
  let data = {
    "mah_num": "T1",
    "status": "準備中",
    "pn": "AAAAAAAAAA",
    "knob": "98"
  }

  let vm = new Vue({
    delimiters: ['${', '}'],
    el: '#app',
    data,
    created() {
      // api fetch data
    },
    mounted() {
      this.buildLine()
      this.buildBar()
    },
    methods: {
      buildLine() {
        if ($("#availableLineChart").length) {
          var ctx = document.getElementById('availableLineChart').getContext('2d');
          var availableLineChart = new Chart(ctx, {
            type: 'line',
            data: {
              labels: ['8', '10', '12', '14', '16', '18', '20', '22', '0', '2', '4', '6',],
              datasets: [{
                label: '時間稼動率',
                data: [100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100],
                backgroundColor: "#4286f4", // blue
                borderColor: "#4286f4",
                fill: false,
                lineTension: 0.3
              }, {
                label: '目標稼動率',
                data: [98, 98, 98, 98, 96, 98, 96, 98, 98, 98, 98, 96],
                backgroundColor: "#f44141", // red
                borderColor: "#f44141",
                fill: false,
                lineTension: 0.3
              }]
            },
            options: {
              legend: {
                display: true,
                position: 'bottom'
              },
              scales: {
                yAxes: [{
                  ticks: {
                    beginAtZero: true,
                    callback: function (value, index, values) {
                      return value + '%';
                    },
                    stepSize: 20
                  },
                  gridLines: {
                    display: true
                  }
                }]
              }
            }
          });
        }
      },
      buildBar() {
        if ($("#availableBarChart").length) {
          var ctx = document.getElementById("availableBarChart");
          var availableBarChart = new Chart(ctx, {
            type: 'bar',
            data: {
              labels: ["檢驗中", "處理中", "準備中", "待機中", "停機中"],
              datasets: [{
                label: '累積目標產量',
                backgroundColor: "#f44141", // red
                data: [71, 68, 50, 38, 32, 22, 10]
              }]
            },

            options: {
              legend: {
                display: false,
                position: 'bottom'
              },
              scales: {
                yAxes: [{
                  ticks: {
                    beginAtZero: true
                  }
                }]
              }
            }
          });
        }
      }
    }
  })

</script>
